{"ast":null,"code":"var _jsxFileName = \"E:\\\\Module2_Chapter4-main\\\\Module2_Chapter4-main\\\\src\\\\BankApp.js\",\n    _s2 = $RefreshSig$();\n\nimport React, { useState, useEffect } from 'react';\nimport { ethers } from 'ethers';\nimport styles from './Bank.module.css';\nimport simple_token_abi from './Contracts/bank_app_abi.json';\nimport Interactions from './Interactions';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst BankApp = () => {\n  _s2();\n\n  var _s = $RefreshSig$();\n\n  // deploy simple token contract and paste deployed contract address here. This value is local ganache chain\n  let contractAddress = \"0x5FbDB2315678afecb367f032d93F642f64180aa3\";\n  const [errorMessage, setErrorMessage] = useState(null);\n  const [defaultAccount, setDefaultAccount] = useState(null);\n  const [connButtonText, setConnButtonText] = useState('Connect Wallet');\n  const [provider, setProvider] = useState(null);\n  const [signer, setSigner] = useState(null);\n  const [contract, setContract] = useState(null);\n  const [transferHash, setTransferHash] = useState(null);\n  const [checkAcc, setCheckAcc] = useState(\"false\");\n  const [accStatus, setAccStatus] = useState(\"\");\n  const [accbalance, setAccBalance] = useState(\"\");\n  const [transactionHistory, setTransactionHistory] = useState([]);\n\n  const connectWalletHandler = () => {\n    if (window.ethereum && window.ethereum.isMetaMask) {\n      window.ethereum.request({\n        method: 'eth_requestAccounts'\n      }).then(result => {\n        accountChangedHandler(result[0]);\n        setConnButtonText('Wallet Connected');\n      }).catch(error => {\n        setErrorMessage(error.message);\n      });\n    } else {\n      console.log('Need to install MetaMask');\n      setErrorMessage('Please install MetaMask browser extension to interact');\n    }\n  };\n\n  const disconnectWalletHandler = () => {\n    setDefaultAccount(null);\n    setConnButtonText('Connect Wallet');\n    setProvider(null);\n    setSigner(null);\n    setContract(null);\n    setTransactionHistory([]);\n  }; // update account, will cause component re-render\n\n\n  const accountChangedHandler = newAccount => {\n    setDefaultAccount(newAccount);\n    updateEthers();\n  };\n\n  const chainChangedHandler = () => {\n    // reload the page to avoid any errors with chain change mid use of application\n    window.location.reload();\n  }; // listen for account changes\n\n\n  window.ethereum.on('accountsChanged', accountChangedHandler);\n  window.ethereum.on('chainChanged', chainChangedHandler);\n\n  const updateEthers = () => {\n    let tempProvider = new ethers.providers.Web3Provider(window.ethereum);\n    setProvider(tempProvider);\n    let tempSigner = tempProvider.getSigner();\n    setSigner(tempSigner);\n    let tempContract = new ethers.Contract(contractAddress, simple_token_abi, tempSigner);\n    setContract(tempContract);\n  };\n\n  const createAccount = async () => {\n    let txt = await contract.createAcc();\n    console.log(txt);\n    setAccStatus(\"Your Account is created\");\n  };\n\n  const checkAccountExists = async () => {\n    let txt = await contract.accountExists();\n\n    if (txt == true) {\n      setCheckAcc(\"true\");\n    }\n  };\n\n  const AccountBalance = async () => {\n    let txt = await contract.accountBalance();\n    let balanceNumber = txt.toNumber(); //let tokenDecimals = await contract.decimals();\n\n    console.log(balanceNumber);\n    setAccBalance('' + balanceNumber);\n  };\n\n  const DepositBalance = async e => {\n    e.preventDefault();\n    let depositAmount = e.target.depositAmount.value;\n    let txt = await contract.deposit({\n      value: depositAmount\n    });\n  };\n\n  const transferHandler = async e => {\n    e.preventDefault();\n    let transferAmount = e.target.sendAmount.value;\n    let recieverAddress = e.target.recieverAddress.value;\n    let txt = await contract.transferEther(recieverAddress, transferAmount);\n    setTransferHash(\"Transfer confirmation hash: \" + txt.hash);\n  };\n\n  const WithdrawBalance = async e => {\n    e.preventDefault();\n    let withdrawAmount = e.target.withdrawAmount.value;\n    let txt = await contract.withdraw(withdrawAmount);\n    console.log(txt);\n  };\n\n  const checkTransactionHistory = async () => {\n    let history = await contract.getTransactionHistory();\n    setTransactionHistory(history);\n  };\n\n  const changeDefaultAccount = () => {\n    let newAccount = prompt('Enter the new default account address:');\n    accountChangedHandler(newAccount);\n  };\n\n  const [showLoanCalculator, setShowLoanCalculator] = useState(false);\n\n  const openLoanCalculator = () => {\n    setShowLoanCalculator(true);\n  };\n\n  const LoanCalculator = () => {\n    _s();\n\n    // State for loan calculator\n    const [loanAmount, setLoanAmount] = useState('');\n    const [interestRate, setInterestRate] = useState('');\n    const [loanTerm, setLoanTerm] = useState('');\n    const [monthlyPayment, setMonthlyPayment] = useState('');\n    const [totalPayment, setTotalPayment] = useState(''); // Loan calculator function\n\n    const calculateLoan = () => {\n      if (loanAmount && interestRate && loanTerm) {\n        const principal = parseFloat(loanAmount);\n        const rate = parseFloat(interestRate) / 100 / 12;\n        const term = parseFloat(loanTerm);\n        const monthlyRate = Math.pow(1 + rate, term);\n        const monthlyPayment = principal * monthlyRate * rate / (monthlyRate - 1);\n        const totalPayment = monthlyPayment * term;\n        setMonthlyPayment(monthlyPayment.toFixed(2));\n        setTotalPayment(totalPayment.toFixed(2));\n      }\n    };\n\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"Loan Calculator\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 163,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"loanAmount\",\n            children: \"Loan Amount:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 166,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"number\",\n            id: \"loanAmount\",\n            value: loanAmount,\n            onChange: e => setLoanAmount(e.target.value)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 167,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 165,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"interestRate\",\n            children: \"Interest Rate (%):\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 175,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"number\",\n            id: \"interestRate\",\n            value: interestRate,\n            onChange: e => setInterestRate(e.target.value)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 176,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 174,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"loanTerm\",\n            children: \"Loan Term (months):\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 184,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"number\",\n            id: \"loanTerm\",\n            value: loanTerm,\n            onChange: e => setLoanTerm(e.target.value)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 185,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 183,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"button\",\n          onClick: calculateLoan,\n          children: \"Calculate\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 192,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 164,\n        columnNumber: 9\n      }, this), monthlyPayment && totalPayment && /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n          children: [\"Monthly Payment: $\", monthlyPayment]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 198,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"h4\", {\n          children: [\"Total Payment: $\", totalPayment]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 199,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 197,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 162,\n      columnNumber: 7\n    }, this);\n  };\n\n  _s(LoanCalculator, \"tNhrxJEx5TbwKi12FujZBVjAZOM=\");\n\n  useEffect(() => {\n    if (contract) {\n      checkTransactionHistory();\n    }\n  }, [contract]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Bank Dapp- Create Account,Check Account,Check Balance,Transfer and Deposit\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 214,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      className: styles.button6,\n      onClick: connectWalletHandler,\n      children: connButtonText\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 215,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: styles.walletCard,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(\"h3\", {\n          children: [\"Address: \", defaultAccount]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 221,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 220,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: AccountBalance,\n          children: \"Account Balance\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 225,\n          columnNumber: 11\n        }, this), ' ', /*#__PURE__*/_jsxDEV(\"h3\", {\n          children: [\"Balance in the Bank: \", accbalance, \" \"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 226,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 224,\n        columnNumber: 9\n      }, this), errorMessage, /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: openLoanCalculator,\n        className: styles.button6,\n        children: \"Open Loan Calculator\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 231,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: checkTransactionHistory,\n        className: styles.button6,\n        children: \"Check Transaction History\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 235,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: changeDefaultAccount,\n        className: styles.button6,\n        children: \"Change Default Account\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 238,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: disconnectWalletHandler,\n        className: styles.button6,\n        children: \"Disconnect Wallet\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 241,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 219,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: styles.interactionsCard,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n          children: \"Click here to Create your account. Make sure you are connected to Wallet\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 248,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: createAccount,\n          children: \"CreateAccount\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 249,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"h4\", {\n          children: \"Click here to check if your account Exists or not\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 250,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: checkAccountExists,\n          children: \"CheckAccountExists\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 251,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"h4\", {\n          children: \"Your Account Status\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 252,\n          columnNumber: 11\n        }, this), \" \", /*#__PURE__*/_jsxDEV(\"h5\", {\n          children: checkAcc\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 252,\n          columnNumber: 40\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 247,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: transferHandler,\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: \"Transfer money\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 255,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Reciever Address\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 256,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          id: \"recieverAddress\",\n          className: styles.addressInput\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 257,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Transfer Amount\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 259,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"number\",\n          id: \"sendAmount\",\n          min: \"0\",\n          step: \"1\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 260,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"submit\",\n          className: styles.button6,\n          children: \"Transfer\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 262,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: transferHash\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 265,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 254,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: DepositBalance,\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: \"Deposit Money\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 268,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Deposit Amount\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 269,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"number\",\n          id: \"depositAmount\",\n          min: \"0\",\n          step: \"1\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 270,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"submit\",\n          className: styles.button6,\n          children: \"Deposit\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 271,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 267,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: WithdrawBalance,\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: \"Withdraw Money\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 276,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Withdraw Amount\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 277,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"number\",\n          id: \"withdrawAmount\",\n          min: \"0\",\n          step: \"1\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 278,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"submit\",\n          className: styles.button6,\n          children: \"Withdraw\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 279,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 275,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 246,\n      columnNumber: 7\n    }, this), showLoanCalculator && /*#__PURE__*/_jsxDEV(LoanCalculator, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 286,\n      columnNumber: 30\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"Transaction History\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 290,\n        columnNumber: 9\n      }, this), transactionHistory.map((transaction, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"Transaction: \", transaction]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 293,\n          columnNumber: 13\n        }, this)\n      }, index, false, {\n        fileName: _jsxFileName,\n        lineNumber: 292,\n        columnNumber: 11\n      }, this))]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 289,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 213,\n    columnNumber: 5\n  }, this);\n};\n\n_s2(BankApp, \"BelZxXdBV3UpbzaC1sgtf8r13YE=\");\n\n_c = BankApp;\nexport default BankApp;\n\nvar _c;\n\n$RefreshReg$(_c, \"BankApp\");","map":{"version":3,"sources":["E:/Module2_Chapter4-main/Module2_Chapter4-main/src/BankApp.js"],"names":["React","useState","useEffect","ethers","styles","simple_token_abi","Interactions","BankApp","contractAddress","errorMessage","setErrorMessage","defaultAccount","setDefaultAccount","connButtonText","setConnButtonText","provider","setProvider","signer","setSigner","contract","setContract","transferHash","setTransferHash","checkAcc","setCheckAcc","accStatus","setAccStatus","accbalance","setAccBalance","transactionHistory","setTransactionHistory","connectWalletHandler","window","ethereum","isMetaMask","request","method","then","result","accountChangedHandler","catch","error","message","console","log","disconnectWalletHandler","newAccount","updateEthers","chainChangedHandler","location","reload","on","tempProvider","providers","Web3Provider","tempSigner","getSigner","tempContract","Contract","createAccount","txt","createAcc","checkAccountExists","accountExists","AccountBalance","accountBalance","balanceNumber","toNumber","DepositBalance","e","preventDefault","depositAmount","target","value","deposit","transferHandler","transferAmount","sendAmount","recieverAddress","transferEther","hash","WithdrawBalance","withdrawAmount","withdraw","checkTransactionHistory","history","getTransactionHistory","changeDefaultAccount","prompt","showLoanCalculator","setShowLoanCalculator","openLoanCalculator","LoanCalculator","loanAmount","setLoanAmount","interestRate","setInterestRate","loanTerm","setLoanTerm","monthlyPayment","setMonthlyPayment","totalPayment","setTotalPayment","calculateLoan","principal","parseFloat","rate","term","monthlyRate","Math","pow","toFixed","button6","walletCard","interactionsCard","addressInput","map","transaction","index"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { ethers } from 'ethers';\nimport styles from './Bank.module.css';\nimport simple_token_abi from './Contracts/bank_app_abi.json';\nimport Interactions from './Interactions';\n\nconst BankApp = () => {\n  // deploy simple token contract and paste deployed contract address here. This value is local ganache chain\n  let contractAddress = \"0x5FbDB2315678afecb367f032d93F642f64180aa3\";\n\n  const [errorMessage, setErrorMessage] = useState(null);\n  const [defaultAccount, setDefaultAccount] = useState(null);\n  const [connButtonText, setConnButtonText] = useState('Connect Wallet');\n\n  const [provider, setProvider] = useState(null);\n  const [signer, setSigner] = useState(null);\n  const [contract, setContract] = useState(null);\n\n  const [transferHash, setTransferHash] = useState(null);\n  const [checkAcc, setCheckAcc] = useState(\"false\");\n  const [accStatus, setAccStatus] = useState(\"\");\n  const [accbalance, setAccBalance] = useState(\"\");\n  const [transactionHistory, setTransactionHistory] = useState([]);\n\n  const connectWalletHandler = () => {\n    if (window.ethereum && window.ethereum.isMetaMask) {\n      window.ethereum\n        .request({ method: 'eth_requestAccounts' })\n        .then((result) => {\n          accountChangedHandler(result[0]);\n          setConnButtonText('Wallet Connected');\n        })\n        .catch((error) => {\n          setErrorMessage(error.message);\n        });\n    } else {\n      console.log('Need to install MetaMask');\n      setErrorMessage('Please install MetaMask browser extension to interact');\n    }\n  };\n\n  const disconnectWalletHandler = () => {\n    setDefaultAccount(null);\n    setConnButtonText('Connect Wallet');\n    setProvider(null);\n    setSigner(null);\n    setContract(null);\n    setTransactionHistory([]);\n  };\n\n  // update account, will cause component re-render\n  const accountChangedHandler = (newAccount) => {\n    setDefaultAccount(newAccount);\n    updateEthers();\n  };\n\n  const chainChangedHandler = () => {\n    // reload the page to avoid any errors with chain change mid use of application\n    window.location.reload();\n  };\n\n  // listen for account changes\n  window.ethereum.on('accountsChanged', accountChangedHandler);\n  window.ethereum.on('chainChanged', chainChangedHandler);\n\n  const updateEthers = () => {\n    let tempProvider = new ethers.providers.Web3Provider(window.ethereum);\n    setProvider(tempProvider);\n\n    let tempSigner = tempProvider.getSigner();\n    setSigner(tempSigner);\n\n    let tempContract = new ethers.Contract(contractAddress, simple_token_abi, tempSigner);\n    setContract(tempContract);\n  };\n\n  const createAccount = async () => {\n    let txt = await contract.createAcc();\n    console.log(txt);\n    setAccStatus(\"Your Account is created\");\n  };\n\n  const checkAccountExists = async () => {\n    let txt = await contract.accountExists();\n    if (txt == true) {\n      setCheckAcc(\"true\");\n    }\n  };\n\n  const AccountBalance = async () => {\n    let txt = await contract.accountBalance();\n    let balanceNumber = txt.toNumber();\n    //let tokenDecimals = await contract.decimals();\n    console.log(balanceNumber);\n    setAccBalance('' + balanceNumber);\n  };\n\n  const DepositBalance = async (e) => {\n    e.preventDefault();\n    let depositAmount = e.target.depositAmount.value;\n    let txt = await contract.deposit({\n      value: depositAmount,\n    });\n  };\n\n  const transferHandler = async (e) => {\n    e.preventDefault();\n    let transferAmount = e.target.sendAmount.value;\n    let recieverAddress = e.target.recieverAddress.value;\n    let txt = await contract.transferEther(recieverAddress, transferAmount);\n    setTransferHash(\"Transfer confirmation hash: \" + txt.hash);\n  };\n\n  const WithdrawBalance = async (e) => {\n    e.preventDefault();\n    let withdrawAmount = e.target.withdrawAmount.value;\n    let txt = await contract.withdraw(withdrawAmount);\n    console.log(txt);\n  };\n\n  const checkTransactionHistory = async () => {\n    let history = await contract.getTransactionHistory();\n    setTransactionHistory(history);\n  };\n\n  const changeDefaultAccount = () => {\n    let newAccount = prompt('Enter the new default account address:');\n    accountChangedHandler(newAccount);\n  };\n\n  const [showLoanCalculator, setShowLoanCalculator] = useState(false);\n\n  const openLoanCalculator = () => {\n    setShowLoanCalculator(true);\n  };\n\n  const LoanCalculator = () => {\n    // State for loan calculator\n    const [loanAmount, setLoanAmount] = useState('');\n    const [interestRate, setInterestRate] = useState('');\n    const [loanTerm, setLoanTerm] = useState('');\n    const [monthlyPayment, setMonthlyPayment] = useState('');\n    const [totalPayment, setTotalPayment] = useState('');\n\n    // Loan calculator function\n    const calculateLoan = () => {\n      if (loanAmount && interestRate && loanTerm) {\n        const principal = parseFloat(loanAmount);\n        const rate = parseFloat(interestRate) / 100 / 12;\n        const term = parseFloat(loanTerm);\n\n        const monthlyRate = Math.pow(1 + rate, term);\n        const monthlyPayment = (principal * monthlyRate * rate) / (monthlyRate - 1);\n        const totalPayment = monthlyPayment * term;\n\n        setMonthlyPayment(monthlyPayment.toFixed(2));\n        setTotalPayment(totalPayment.toFixed(2));\n      }\n    };\n\n    return (\n      <div>\n        <h3>Loan Calculator</h3>\n        <form>\n          <div>\n            <label htmlFor=\"loanAmount\">Loan Amount:</label>\n            <input\n              type=\"number\"\n              id=\"loanAmount\"\n              value={loanAmount}\n              onChange={(e) => setLoanAmount(e.target.value)}\n            />\n          </div>\n          <div>\n            <label htmlFor=\"interestRate\">Interest Rate (%):</label>\n            <input\n              type=\"number\"\n              id=\"interestRate\"\n              value={interestRate}\n              onChange={(e) => setInterestRate(e.target.value)}\n            />\n          </div>\n          <div>\n            <label htmlFor=\"loanTerm\">Loan Term (months):</label>\n            <input\n              type=\"number\"\n              id=\"loanTerm\"\n              value={loanTerm}\n              onChange={(e) => setLoanTerm(e.target.value)}\n            />\n          </div>\n          <button type=\"button\" onClick={calculateLoan}>\n            Calculate\n          </button>\n        </form>\n        {monthlyPayment && totalPayment && (\n          <div>\n            <h4>Monthly Payment: ${monthlyPayment}</h4>\n            <h4>Total Payment: ${totalPayment}</h4>\n          </div>\n        )}\n      </div>\n    );\n  };\n\n  useEffect(() => {\n    if (contract) {\n      checkTransactionHistory();\n    }\n  }, [contract]);\n\n  return (\n    <div>\n      <h2>Bank Dapp- Create Account,Check Account,Check Balance,Transfer and Deposit</h2>\n      <button className={styles.button6} onClick={connectWalletHandler}>\n        {connButtonText}\n      </button>\n\n      <div className={styles.walletCard}>\n        <div>\n          <h3>Address: {defaultAccount}</h3>\n        </div>\n\n        <div>\n          <button onClick={AccountBalance}>Account Balance</button>{' '}\n          <h3>Balance in the Bank: {accbalance} </h3>\n        </div>\n\n        {errorMessage}\n        {/* Add the button for opening the loan calculator */}\n        <button onClick={openLoanCalculator} className={styles.button6}>\n          Open Loan Calculator\n        </button>\n        {/* Add the buttons for transaction history, changing default account, and disconnecting wallet */}\n        <button onClick={checkTransactionHistory} className={styles.button6}>\n          Check Transaction History\n        </button>\n        <button onClick={changeDefaultAccount} className={styles.button6}>\n          Change Default Account\n        </button>\n        <button onClick={disconnectWalletHandler} className={styles.button6}>\n          Disconnect Wallet\n        </button>\n      </div>\n\n      <div className={styles.interactionsCard}>\n        <div>\n          <h4>Click here to Create your account. Make sure you are connected to Wallet</h4>\n          <button onClick={createAccount}>CreateAccount</button>\n          <h4>Click here to check if your account Exists or not</h4>\n          <button onClick={checkAccountExists}>CheckAccountExists</button>\n          <h4>Your Account Status</h4> <h5>{checkAcc}</h5>\n        </div>\n        <form onSubmit={transferHandler}>\n          <h3>Transfer money</h3>\n          <p>Reciever Address</p>\n          <input type=\"text\" id=\"recieverAddress\" className={styles.addressInput} />\n\n          <p>Transfer Amount</p>\n          <input type=\"number\" id=\"sendAmount\" min=\"0\" step=\"1\" />\n\n          <button type=\"submit\" className={styles.button6}>\n            Transfer\n          </button>\n          <div>{transferHash}</div>\n        </form>\n        <form onSubmit={DepositBalance}>\n          <h3>Deposit Money</h3>\n          <p>Deposit Amount</p>\n          <input type=\"number\" id=\"depositAmount\" min=\"0\" step=\"1\" />\n          <button type=\"submit\" className={styles.button6}>\n            Deposit\n          </button>\n        </form>\n        <form onSubmit={WithdrawBalance}>\n          <h3>Withdraw Money</h3>\n          <p>Withdraw Amount</p>\n          <input type=\"number\" id=\"withdrawAmount\" min=\"0\" step=\"1\" />\n          <button type=\"submit\" className={styles.button6}>\n            Withdraw\n          </button>\n        </form>\n      </div>\n\n      {/* Render the LoanCalculator component if showLoanCalculator is true */}\n      {showLoanCalculator && <LoanCalculator />}\n\n      {/* Render transaction history */}\n      <div>\n        <h3>Transaction History</h3>\n        {transactionHistory.map((transaction, index) => (\n          <div key={index}>\n            <p>Transaction: {transaction}</p>\n          </div>\n        ))}\n      </div>\n    </div>\n  );\n};\n\nexport default BankApp;\n"]},"metadata":{},"sourceType":"module"}